<?xml version="1.0" encoding="utf-8"?>
<Window
    x:Class="JustBedwars.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:JustBedwars"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:muxm="using:Microsoft.UI.Xaml.Media"
    xmlns:media="using:CommunityToolkit.WinUI.Media"
    xmlns:animations="using:CommunityToolkit.WinUI.Animations"
    mc:Ignorable="d"
    Title="JustBedwars">

    <Window.SystemBackdrop>
        <MicaBackdrop Kind="Base"/>
    </Window.SystemBackdrop>
    <Window.Content>
        <Page>
            <Grid>
                <!-- App Title -->
                <TextBlock Text="JustBedwars" 
                           HorizontalAlignment="Center" 
                           VerticalAlignment="Top" 
                           Margin="7" 
                           x:Name="AppTitle" 
                           Canvas.ZIndex="1">
                    <animations:Implicit.ShowAnimations>
                        <animations:TranslationAnimation Duration="0:0:1" Delay="0:0:4" From="0,-40,0" To="0"/>
                        <animations:OpacityAnimation Duration="0:0:1" Delay="0:0:4" From="0" To="1.0"/>
                    </animations:Implicit.ShowAnimations>
                </TextBlock>
                <!-- Back Button - Currently Disabled -->
                <AppBarButton Click="BackButton_Click"
                              x:Name="BackButton"
                              Icon="Back"
                              IsCompact="True"
                              Width="36"
                              Height="60"
                              Margin="7, -3, 0, 0"
                              Padding="20"
                              Visibility="Collapsed"/>
                <!-- Always on Top-->
                <Button Click="AlwaysOnTopButton_Click"
                        CornerRadius="0"
                        Background="Transparent"
                        BorderBrush="Transparent"
                        x:Name="AlwaysOnTopButton"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Top"
                        Width="48"
                        Height="32"
                        Margin="0, 0, 138, 0"
                        Padding="3"
                        FontFamily="Segoe Fluent Icons"
                        Content="&#xE8A7;"
                        Canvas.ZIndex="1">
                    <animations:Implicit.ShowAnimations>
                        <animations:TranslationAnimation Duration="0:0:1" Delay="0:0:4" From="0,-40,0" To="0"/>
                        <animations:OpacityAnimation Duration="0:0:1" Delay="0:0:4" From="0" To="1.0"/>
                    </animations:Implicit.ShowAnimations>
                </Button>
                <!-- Navigation View -->
                <NavigationView x:Name="NavView"
                                Loaded="NavView_Loaded"
                                ItemInvoked="NavView_ItemInvoked"
                                PaneOpening="NavView_PaneOpening"
                                PaneClosing="NavView_PaneClosing"
                                IsBackButtonVisible="Collapsed"
                                AlwaysShowHeader="False"
                                PaneDisplayMode="Auto"
                                IsPaneOpen="False"
                                PaneTitle="JustBedwars"
                                Margin="0, 32, 0, 0">
                    <NavigationView.MenuItems>
                        <NavigationViewItem Icon="Play" Content="Current Game" Tag="JustBedwars.Views.PlayerList"/>
                        <NavigationViewItem Content="Player Lookup" Tag="JustBedwars.Views.StatsPage">
                            <NavigationViewItem.Icon>
                                <FontIcon Glyph="&#xEDE4;" FontFamily="Segoe Fluent Icons"/>
                            </NavigationViewItem.Icon>
                        </NavigationViewItem>
                        <NavigationViewItem Content="Leaderboards" Tag="JustBedwars.Views.LeaderboardsPage">
                            <NavigationViewItem.Icon>
                                <FontIcon Glyph="&#xECA7;" FontFamily="Segoe Fluent Icons"/>
                            </NavigationViewItem.Icon>
                        </NavigationViewItem>
                        <NavigationViewItem Content="Guilds" Tag="JustBedwars.Views.GuildLookupPage">
                            <NavigationViewItem.Icon>
                                <FontIcon Glyph="&#xE902;" FontFamily="Segoe Fluent Icons"/>
                            </NavigationViewItem.Icon>
                        </NavigationViewItem>
                    </NavigationView.MenuItems>
                    <NavigationView.Content>
                        <Frame x:Name="ContentFrame"/>
                    </NavigationView.Content>
                    <NavigationView.PaneFooter>
                        <Grid x:Name="MediaPlayerGrid" Visibility="Collapsed" Margin="8,0,8,4" Canvas.ZIndex="2">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <animations:Implicit.ShowAnimations>
                                <animations:TranslationAnimation Duration="0:0:0.7" From="-400,0,0" To="0"/>
                                <animations:OpacityAnimation Duration="0:0:0.3" From="0" To="1"/>
                            </animations:Implicit.ShowAnimations>
                            <animations:Implicit.HideAnimations>
                                <animations:TranslationAnimation Duration="0:0:0.1" From="0,-120,0" To="0,-120,0"/>
                                <animations:OpacityAnimation Duration="0:0:0.3" From="1" To="0"/>
                            </animations:Implicit.HideAnimations>

                            <Border MaxHeight="124" Margin="-4" Grid.ColumnSpan="2" Grid.RowSpan="3" HorizontalAlignment="Stretch" VerticalAlignment="Bottom" CornerRadius="4">
                                <Image x:Name="MediaImageBG" Stretch="UniformToFill" HorizontalAlignment="Stretch" VerticalAlignment="Center">
                                    <Image.Source>
                                        <BitmapImage UriSource="/Assets/Icon.ico"/>
                                    </Image.Source>
                                </Image>
                            </Border>

                            <Border Margin="-4" Grid.ColumnSpan="2" Grid.RowSpan="3" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" CornerRadius="4"
                                    BorderBrush="{ThemeResource CardStrokeColorDefault}"
                                    BorderThickness="0.2">
                                <Border.Background>
                                    <media:AcrylicBrush BlurAmount="32"
                                        TintColor="Black"
                                        TintOpacity="0" />
                                </Border.Background>
                                <Border Background="{ThemeResource ControlOnImageFillColorDefaultBrush}"/>
                            </Border>


                            <Border Grid.RowSpan="1" CornerRadius="4" Margin="0,0,12,4">
                                <Image x:Name="MediaImage" Width="64" Height="64" Stretch="UniformToFill">
                                    <Image.Source>
                                        <BitmapImage UriSource="/Assets/Icon.ico"/>
                                    </Image.Source>
                                </Image>
                            </Border>

                            <StackPanel Grid.Column="1" Margin="0,2,0,0">
                                <TextBlock x:Name="MediaTitle" Text="Title" FontWeight="Bold" FontSize="14" TextTrimming="CharacterEllipsis"/>
                                <TextBlock x:Name="MediaAuthor" Text="Author" FontSize="12" TextTrimming="CharacterEllipsis"/>
                            </StackPanel>

                            <ProgressBar Grid.Column="0" Grid.Row="1" x:Name="MediaProgressBar" Height="2" Margin="0,4,0,0" Grid.ColumnSpan="2"/>

                            <StackPanel Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Spacing="4" Margin="0,010,0,0">
                                <Button x:Name="PreviousButton" FontFamily="Segoe Fluent Icons" Content="&#xE892;" Click="PreviousButton_Click"/>
                                <Button x:Name="PlayPauseButton" FontFamily="Segoe Fluent Icons" Content="&#xE769;" Click="PlayPauseButton_Click"/>
                                <Button x:Name="NextButton" FontFamily="Segoe Fluent Icons" Content="&#xE893;" Click="NextButton_Click"/>
                            </StackPanel>
                        </Grid>
                    </NavigationView.PaneFooter>
                    <animations:Implicit.ShowAnimations>
                        <animations:TranslationAnimation Duration="0:0:1" Delay="0:0:3.5" From="0,200,0" To="0"/>
                        <animations:OpacityAnimation Duration="0:0:1" Delay="0:0:3.5" From="0" To="1.0"/>
                    </animations:Implicit.ShowAnimations>
                </NavigationView>
                <!-- Splash Screen -->
                <Image Source="/Assets/SplashScreen.scale-200.png" MaxWidth="620" Stretch="Uniform" Canvas.ZIndex="-1">
                    <animations:Implicit.ShowAnimations>
                        <animations:TranslationAnimation Duration="0:0:1.5" Delay="0:0:3.2" From="0" To="0,-350,0"/>
                        <animations:OpacityAnimation Duration="0:0:1.5" Delay="0:0:3.2" From="1.0" To="0"/>
                    </animations:Implicit.ShowAnimations>
                </Image>
            </Grid>
        </Page>
    </Window.Content>
</Window>
